(this["webpackJsonpword-traps"]=this["webpackJsonpword-traps"]||[]).push([[0],{101:function(e,t,a){},121:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),l=a.n(i),o=(a(78),a(160)),c=a(161),u=a(45),m=a(16),s=a(59),p=a.n(s),d={margin:30,maxWidth:500};function f(){return r.a.createElement("img",{style:d,alt:"word-traps",src:p.a})}var g=a(155),y={width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center"},b=function(e){var t=e.children;return r.a.createElement(g.a,{style:{height:"100%"}},r.a.createElement("main",{style:y},t))},v=a(162),h=a(163);var E=function(e){var t=Object(u.b)(),a=Object(n.useState)(""),i=Object(m.a)(a,2),l=i[0],o=i[1];return r.a.createElement(b,null,r.a.createElement(f,null),r.a.createElement(v.a,{placeholder:"wprowad\u017a nazw\u0119 gry",margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0},onChange:function(e){return o(e.target.value)}}),r.a.createElement(h.a,{disabled:!l.length,color:"primary",onClick:function(){window.navigator.vibrate(200),t("/word-traps/game/".concat(l))},variant:"contained"},"Nowa Gra"))},w=a(22),j=a(29),O=a(64),k=a(65),T=a(50),I=function(){function e(){Object(O.a)(this,e)}return Object(k.a)(e,null,[{key:"init",value:function(){var e=this.getTeamId();return{currentTeam:e,teamsReady:!1,trapsReady:!1,playerReady:!1,teams:Object(j.a)({},e,this.initTeam())}}},{key:"getTeamId",value:function(){var e=localStorage.getItem("teamId");if(null!==e&&Object(T.isUuid)(e))return e;var t=Object(T.uuid)();return localStorage.setItem("teamId",t),t}},{key:"getNextWord",value:function(){var e=["Wampir","Pi\u0142karz","Murarz","Namiot","Kostka","Sygna\u0142"];return e[Math.floor(Math.random()*e.length)]}},{key:"getOpponentTeam",value:function(e){var t=this,a=Object.entries(e.teams||{}).filter((function(e){return e[0]!==t.getTeamId()})).map((function(e){return e[1]}));if(a.length)return a[0];throw new Error("opponent not found!")}},{key:"containsTeam",value:function(e){return Object.keys(e.teams).includes(this.getTeamId())}},{key:"getSetTrapsCount",value:function(e){return Object.values(e.teams||{}).map((function(e){return e.traps||[]})).map((function(e){return e.length})).reduce((function(e,t){return e+t}))}},{key:"getRequiredTrapsCount",value:function(e){var t=this;return Object.values(e.teams||{}).map((function(e){return e.level})).reduce((function(e,a){return t.trapsRequired[e]+t.trapsRequired[a]}))}},{key:"initTeam",value:function(){return{level:1,traps:[],word:this.getNextWord()}}}]),e}();I.trapsRequired=[0,3,4,5,6,7];var R=a(159),z=a(66),S=a.n(z),x={textTransform:"uppercase",fontSize:"10vw"};var C=function(e){var t=e.content;return r.a.createElement("h1",{style:x},t)},N={form:{display:"flex",flexDirection:"column"}};var q=function(e){var t=e.word,a=e.setTraps,i=Object(n.useState)([]),l=Object(m.a)(i,2),o=l[0],c=l[1],u=Object(n.useState)(!1),s=Object(m.a)(u,2),p=s[0],d=s[1],f=3===o.length&&-1===o.indexOf("");return r.a.createElement(b,null,r.a.createElement("p",null,"to s\u0142owo dla dru\u017cyny przeciwnej"),r.a.createElement(C,{content:t}),r.a.createElement("p",null,"Zastawcie wasze pu\u0142apki!"),r.a.createElement("form",{noValidate:!0,autoComplete:"off",style:N.form},r.a.createElement(v.a,{disabled:p,placeholder:"wprowad\u017a s\u0142owo",label:"Pierwsza pu\u0142apka",margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0},onChange:function(e){return g(0,e.target.value)}}),r.a.createElement(v.a,{disabled:p,placeholder:"wprowad\u017a s\u0142owo",label:"Druga pu\u0142apka",margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0},onChange:function(e){return g(1,e.target.value)}}),r.a.createElement(v.a,{disabled:p,placeholder:"wprowad\u017a s\u0142owo",label:"Trzecia pu\u0142apka",margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0},onChange:function(e){return g(2,e.target.value)}})),r.a.createElement(h.a,{disabled:!f,color:"primary",variant:"contained",onClick:function(){a(o),d(!0)}},"Gotowe!"),p?r.a.createElement("p",null,"oczekiwanie na przeciwnik\xf3w"):null);function g(e,t){c(Object.assign([],o,Object(j.a)({},e,t)))}},P=(a(101),{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center"}),D=function(e){var t=e.children,a=e.className,n=e.style;return r.a.createElement("main",{style:Object.assign({},P,n),className:a},t)};var G=function(e){var t=e.title,a=e.subtitle,i=e.timeout,l=e.onTimeout,o=Object(n.useState)(i),c=Object(m.a)(o,2),u=c[0],s=c[1];return Object(n.useEffect)((function(){u>0&&setTimeout((function(){return s(u-1)}),1e3),0===u&&l()}),[u,i,l]),r.a.createElement(D,{style:{animationDuration:"".concat(i,"s")},className:"timer timer-animation"},r.a.createElement("small",{className:"subtitle"},a),r.a.createElement(C,{content:t}),r.a.createElement("p",{className:"clock"},u))},A=a(158);function L(e){var t=e.title;return r.a.createElement("div",null,r.a.createElement(A.a,{size:64,style:{margin:20},color:"secondary"}),t?r.a.createElement("h1",null,t):"")}var W=function(e){var t=e.onConfirm;return r.a.createElement(D,null,r.a.createElement(L,{title:"podaj telefon graczowi zgaduj\u0105cemu"}),r.a.createElement(h.a,{onClick:t,variant:"contained",color:"primary"},"Ok"))};var B=function(){return r.a.createElement(D,null,r.a.createElement(L,{title:"oczekiwanie na ruch dru\u017cyny przeciwnej..."}))};var M=function(e){var t=e.gameId;return r.a.createElement(b,null,r.a.createElement(L,{title:"czekamy na drug\u0105 dru\u017cyn\u0119"}),r.a.createElement("pre",null,r.a.createElement("a",{href:"http://localhost:3000/game/".concat(t)},"http://localhost:3000/game/",t)))};var J=function(e){var t=e.gameId,a=e.gameState,i=e.setGameState,l=Object(n.useState)(!1),o=Object(m.a)(l,2),c=o[0],u=o[1];if(!a.teamsReady)return r.a.createElement(M,{gameId:t});if(!a.trapsReady){var s=I.getOpponentTeam(a);return r.a.createElement(q,{word:s.word,setTraps:function(e){a.teams[I.getTeamId()].traps=e,i(a)}})}return a.playerReady?a.playerReady?c?r.a.createElement(G,{key:"playtime",timeout:30,title:I.getOpponentTeam(a).word,subtitle:"\ud83d\udde3\ufe0f opowiadaj!",onTimeout:function(){return console.log("timeout!")}}):r.a.createElement(G,{key:"preparation",timeout:3,title:I.getOpponentTeam(a).word,subtitle:"\u23f3 przygotuj si\u0119!",onTimeout:function(){return u(!0)}}):r.a.createElement("p",null,"loading..."):a.currentTeam===I.getTeamId()?r.a.createElement(W,{onConfirm:function(){return i(Object(w.a)(Object(w.a)({},a),{},{playerReady:!0}))}}):r.a.createElement(B,null)},K=a(102),U=S.a.initializeApp({apiKey:"AIzaSyAB5xPgiX6lio_Ex_i1G5GWIrQqqqznlio",authDomain:"word-traps.firebaseapp.com",databaseURL:"https://word-traps.firebaseio.com",projectId:"word-traps",storageBucket:"word-traps.appspot.com",messagingSenderId:"1055810547251",appId:"1:1055810547251:web:6ae6b37606fb568b983d46"}).database();var _=function(e){var t=e.gameId;if(!t)throw new Error("no game id");var a=Object(n.useState)(),i=Object(m.a)(a,2),l=i[0],o=i[1];return Object(R.a)((function(){U.ref("/game/".concat(t)).on("value",(function(e){var a=e.val();if(K(l,a))console.log("rerender skipped");else if(a)o(Object(w.a)(Object(w.a)({},a),{},{teamsReady:2===Object.keys(a.teams).length,trapsReady:I.getRequiredTrapsCount(a)===I.getSetTrapsCount(a),playerReady:!1,preparationReady:!1}));else{var n=I.init();c(t,n),o(Object(w.a)(Object(w.a)({},n),{},{teamsReady:!1,trapsReady:!1,playerReady:!1,preparationReady:!1}))}}))})),l?I.containsTeam(l)?r.a.createElement(J,{gameId:t,gameState:l,setGameState:function(e){return c(t,e)}}):(l.teams[I.getTeamId()]=I.initTeam(),c(t,l),r.a.createElement(L,{title:"joining game..."})):r.a.createElement(D,null,r.a.createElement(L,{title:"\u0141adowanie"}));function c(e,t){U.ref("/game/".concat(e)).set(t),o(t)}},Q=a(67),V=a.n(Q),X=a(49),Z=a.n(X),F=V()({palette:{primary:Z.a}});l.a.render(r.a.createElement(o.a,{theme:F},r.a.createElement(c.a,null),r.a.createElement(u.a,{basepath:"/word-traps"},r.a.createElement(E,{path:"/",default:!0}),r.a.createElement(_,{path:"/game/:gameId"}))),document.getElementById("root"))},59:function(e,t,a){e.exports=a.p+"static/media/logo.ff5abeb2.svg"},73:function(e,t,a){e.exports=a(121)},78:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.3b616a1c.chunk.js.map